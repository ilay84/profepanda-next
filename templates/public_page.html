{% extends "base.html" %}
{% block title %}{{ page.title }} · ProfePanda{% endblock %}

{% block content %}
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap');
  .page-wrap{max-width:980px;margin:1.25rem auto 2.5rem; font-family:'Montserrat', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;}
  .page-title{margin:.25rem 0 .35rem; font-size:clamp(1.6rem, 1.2rem + 1.2vw, 2.2rem); font-weight:800; color:#0f172a;}
  .meta{display:flex; gap:.5rem; flex-wrap:wrap; align-items:center; color:#64748b; font-size:.95rem; margin:.25rem 0 1rem;}
  .tag{display:inline-block; padding:.15rem .55rem; border-radius:999px; background:#eef2ff; color:#1e40af; font-weight:600; font-size:.82rem;}
  .page-content{font-size:1.05rem; line-height:1.8; color:#0f172a;}
  .page-content img{max-width:100%; height:auto;}
  .page-content iframe{max-width:100%; width:100%; border:0; margin:.75rem 0;}
  .divider{margin:1rem 0 1.25rem; border:0; border-top:1px solid #e5e7eb;}

  /* Accordion styling for public pages */
  .page-content details.pp-accordion {
    border:1px solid #e5e7eb;
    border-radius:10px;
    background:#fff;
    margin:.75rem 0;
  }
  .page-content details.pp-accordion + details.pp-accordion { margin-top:.5rem; }
  .page-content details.pp-accordion > summary {
    cursor:pointer;
    list-style:none;
    padding:.6rem .8rem;
    font-weight:600;
    color:#0f172a;
    display:flex;
    align-items:center;
    gap:.5rem;
  }
  .page-content details.pp-accordion > summary::-webkit-details-marker { display:none; }
  .page-content details.pp-accordion > summary::before {
    content:"▸";
    transform: translateY(1px);
  }
  .page-content details.pp-accordion[open] > summary::before { content:"▾"; }
  .page-content .pp-accordion-body {
    padding:.6rem .8rem .8rem;
    border-top:1px solid #e5e7eb;
    color:#334155;
  }
</style>

<div class="page-wrap">
  <h1 class="page-title">{{ page.title }}</h1>

  <div class="meta">
    {% if page.created_at %}
      <span>Publicado: {{ page.created_at }}</span>
    {% endif %}
    {% if page.tags %}
      <span>•</span>
      <span>
        {% for t in page.tags %}
          <span class="tag">{{ t }}</span>
        {% endfor %}
      </span>
    {% endif %}
  </div>

  <hr class="divider">

  <div class="page-content">
    {{ page.html | safe }}
  </div>
</div>
<script>
  // Allow only one <details.pp-accordion> open at a time (within .page-content)
  (function () {
    var root = document.querySelector('.page-content');
    if (!root) return;

    function wire() {
      var accs = root.querySelectorAll('details.pp-accordion');
      accs.forEach(function (d) {
        // Avoid double-wiring
        if (d.__ppWired) return;
        d.__ppWired = true;

        d.addEventListener('toggle', function () {
          if (!d.open) return;
          accs.forEach(function (o) {
            if (o !== d) o.removeAttribute('open');
          });
        });
      });
    }

    wire();
  })();
</script>
{% endblock %}